
# README – Product Package Submission

**Project Title:** [MyMosque - Mosque Community App]  
**Student Name:** Mohammed Qureshi -- 220010950
**Module:** IN3007 – BSc Individual Project  
**Consultant:** [Abigail Parisaca Vargas]

---

## Contents of this Submission (Zip Archive)

This archive contains the **Product Package** for my final project submission. The structure is as follows:

```
/.vscode/                    → VS Code workspace settings (launch configurations, extensions, etc.)
/mymosque/                   → Root project folder
├── .dart_tool/              → Dart tool metadata (auto-generated)
├── android/                 → Android-specific platform configuration and build files
├── assets/
│   ├── images/              → App assets (images)                
├── functions/               → Firebase Cloud Functions (backend logic for notifications, etc.)
├── lib/                     → Main Flutter app source code
│   ├── components/          → Reusable UI components/widgets
│   ├── helper/              → Helper functions and navigation utilities
│   ├── models/              → Dart models for data structures (e.g., UserProfile, Post, Mosque)
│   ├── pages/               → Screens and page views (e.g., profile page, settings, search page)
│   ├── services/            → Application services (Firebase integration and data handling)
│   │   ├── auth/            → Authentication-related services (login, registration, Google sign-in)
│   │   └── database/        → Database services (Firestore integration etc.)
│   ├── themes/              → Light and dark theme definitions, theme provider
│   └── firebase_options.dart → Firebase project configuration (auto-generated)
├── main.dart                → Main app entry point (runs the Flutter app)

.firebaserc                     → Firebase project configuration  
.flutter-plugins                → Generated list of Flutter plugins used  
.flutter-plugins-dependencies   → Generated plugin dependency info  
.gitignore                      → Specifies intentionally untracked files to ignore in version control  
.metadata                       → Flutter project metadata  
analysis_options.yaml           → Dart analysis rules and linting configuration  
devtools_options.yaml           → Options for Dart DevTools  
firebase.json                   → Firebase configuration for Cloud Functions  
mymosque.iml                    → IntelliJ project file (can be ignored as not using IntelliJ/Android Studio)  
pubspec.yaml                    → Flutter project configuration and package dependencies  
pubspec.lock                    → Exact versions of dependencies used (generated by `flutter pub get`)  
README.md                       → Project information, setup instructions (this file)  
```

The following folders were **deliberately removed to reduce size**, as this project does not target these platforms:

```
/iOS/
/windows/  
/macos/  
/linux/  
/web/
/build/  
/test/        
.idea/                  
```

---

## Installation and Running Instructions

### Recommended Method (Real Physical Android Device using APK)

This is the **preferred way to use the program** and ensures the best stability and full functionality.

### **Install the APK onto your physical Android device:**
   - Locate the APK file: `app-debug.apk` in the root of the ZIP i.e. MyMosque folder where       mymosque folder is.
   - Transfer it to your Android device via USB, email, or cloud storage etc..
   - Enable **"Install from unknown sources"** on your Android device.
   - Tap on the APK file to install.
   - Open the app
   - Enable permisions when prompted - notifications, location

---

###  Alternative Method (APK on Android Emulator via Android Studio)

The app may be run on an Android emulator, but **note the following limitations**:

- Some emulators **may not allow viewing of uploaded proof files (e.g., images or PDFs)**.
- Location features may not work properly or may be unreliable in certain emulators.
- Firebase services (e.g., authentication, Firestore) might behave unpredictably depending on emulator configuration.
- Emulator performance and stability vary across machines.

#### Emulator Setup Requirements:

- **Android Studio installed** (latest stable version)
- **Android Virtual Device (AVD):**
  - Target: Android 11 (API 30) or higher  
  - Minimum RAM: 4GB allocated to the emulator  
  - "Google Play" enabled for full feature compatibility  
  - Set location to London for optimal use of location features

---

###  Worst-Case Method (Run via VS Code)

> Only recommended if using the APK is not possible. This is the least reliable option due to the complexity of local setup.

#### Requirements:

- **Flutter SDK:** Version 3.16.0 (or latest stable compatible)
- **Dart SDK:** Comes bundled with Flutter  
- **Java Development Kit (JDK):** Java 17 (tested and working with this project)  
- **Android SDK:** 
    API Level 35 (Android 15) — tested with Android 14 (API 34) emulator and Android 15 (API 35) real device
    Emulator recommended: Android 11 (API 30) or higher for stable operation  
- **VS Code extensions:** Flutter, Dart  

---

### Java Setup and Gradle Configuration Notes

This project requires Java Development Kit (JDK) version 17 for the Gradle build process.

- Ensure that the `JAVA_HOME` environment variable is set to your local JDK 17 installation.
- Example for Windows:
  
  `JAVA_HOME = C:\Program Files\Java\jdk-17`

- The build system will automatically detect Java via the `JAVA_HOME` environment variable.

Important notice about `gradle.properties`:

The project's `gradle.properties` file originally contained the following line:

`org.gradle.java.home=C:\\Program Files\\Java\\jdk-17`

This line was specific to the developer’s machine and has been removed from the submission to ensure portability across different systems.

If this line remains and the specified path does not exist on your machine, the build will fail with an error about the Java installation not being found.

To avoid this issue, rely on the global `JAVA_HOME` environment variable to specify your local JDK 17 installation. No hardcoded Java path is required in `gradle.properties` if `JAVA_HOME` is set correctly. If it does not work then try to hardcode it in `gradle.properties` by pasting the equivalent of `org.gradle.java.home=C:\\Program Files\\Java\\jdk-17` for wherever your local JDK 17 installation is located.

---

#### Steps to Run app:

```bash
flutter pub get                     # Install project dependencies  
flutter build apk                   # Optional: build APK yourself  
flutter run                         # Run the app on a connected device or emulator  
```

---

### Using the App

When first loading up the app, the `Login` page will be shown. At the bottom of the screen is a message saying `Don't have an account? Register now.`. If this is tapped you will be taken to the `Register` page where an account can be created either manually, or by using `Google Sign-in`. If `Google Sign-in` was used for account creation, the user will be directed to a `Complete Profile` page where they will be asked to enter their gender as this is not able to be done using Google. After a succesful account creation, the user will be taken to the `Home` page.

The database has already been populated during development with some users, mosques, posts and events to allow the marker to have a sense of what using the app is like with a larger user base - not just with initial setup as the first user. At this stage the user is a `general user` meaning that they have no mosque admin privilages. The following are some noteable tasks that can be performed at this stage:

**Nearby Page**
- Navigate to this page by tapping the location icon in the bottom navigation bar
- View a list of nearby mosques
- Use the map to see mosques as markers
- Get directions in Google Maps or view profile by tapping on the tile

**View Mosque Profiles**
- View mosque profiles through posts, search, nearby tab etc. to see their posts, events, followers, admins.
- Set notification preferences using bell icon
- Mark as primary mosque using star icon
- Follow mosque

**Add events**
- View events through post feeds, mosque profiles, or events tab
- Mark as attending by adding to my events

### Social features
Many features in the app cater to the social element so to test these features it is recommended to create a minimum of 2 accounts to see how users can interact with each other. Examples include sending and accepting friend requests and viewing friends who are attending events.

### Mosque features
In order to access mosque functionality, the user must be affiliated with a mosque profile. The user can submit a mosque profile application through settings -> Register Mosque Profile. When the application is submitted, this must be approved by a system admin account in order for the profile to be created.

**Admin Access**

This project has a **single system admin account** required for testing admin-only features (approving mosque applications):

Email: mymosque@gmail.com  
Password: Pass123  

There is **no in-app way to create an admin account**. You must use the provided credentials for any admin-related functionality.

An application can be approved by going to settings -> Review Mosque Applications.

Once approved, the mosque profile will be automatically created and the applicant will be an affiliated user with privilages for that mosque.

### Post Creation
Affiliated users cancreate posts, including announcement posts and event posts with optional images and event details.

## Prayer timetable
A prayer timetable can be entered through settings on the mosque profile -> Edit Prayer timetable. Times for a day can be entered for the 5 daily prayers for start and jamaat (congregation) times by tapping each time field and entering data. (Fajr = earliest prayer -- Isha = latest prayer). These times will then appear on the mosque profile page.

## Requesting affiliation
A second account can be used to request affiliation for the newly created mosque to which the affiliated user can accept, allowing the second user the same privilages.

##  Additional Notes

- **Firebase configuration is complete** and included via `firebase_options.dart`.
- All reused packages and third-party libraries are declared in `pubspec.yaml`.
- Location services and proof file upload require permissions granted on real devices.
